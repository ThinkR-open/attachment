<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="attachment">
<title>Bookdown, quarto and other scripts dependencies • attachment</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Bookdown, quarto and other scripts dependencies">
<meta property="og:description" content="attachment">
<meta property="og:image" content="https://thinkr-open.github.io/attachment/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">attachment</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.4.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/a-fill-pkg-description.html">a-Help during package development</a>
    <a class="dropdown-item" href="../articles/b-bookdown-and-scripts.html">Bookdown, quarto and other scripts dependencies</a>
    <a class="dropdown-item" href="../articles/create-dependencies-file.html">Create dependencies file</a>
    <a class="dropdown-item" href="../articles/use_renv.html">Use {renv} with developers tools</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ThinkR-open/attachment/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Bookdown, quarto and other scripts dependencies</h1>
                        <h4 data-toc-skip class="author">Sébastien
Rochette</h4>
            
            <h4 data-toc-skip class="date">2023-06-01</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ThinkR-open/attachment/blob/HEAD/vignettes/b-bookdown-and-scripts.Rmd" class="external-link"><code>vignettes/b-bookdown-and-scripts.Rmd</code></a></small>
      <div class="d-none name"><code>b-bookdown-and-scripts.Rmd</code></div>
    </div>

    
    
<script type="text/javascript">
$(document).ready(function () {
  window.initializeCodeFolding("show" === "show");
});
</script><div class="section level2">
<h2 id="load-package-attachment">Load package {attachment}<a class="anchor" aria-label="anchor" href="#load-package-attachment"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://thinkr-open.github.io/attachment/">attachment</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="use-devdev_history-r">Use “dev/dev_history.R”<a class="anchor" aria-label="anchor" href="#use-devdev_history-r"></a>
</h2>
<p>When building your package, create a file called “dev_history.R” in a
“dev/” directory. You will store all “manual” calls to
<code>devtools::xxx</code> and <code>usethis::xxx</code> in this
script.<br>
Its first line should be :</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">usethis</span><span class="fu">::</span><span class="fu">use_build_ignore</span><span class="op">(</span><span class="st">"dev"</span><span class="op">)</span></span></code></pre></div>
<p>You can then call {attachment} in this file to help you build your
description file.</p>
</div>
<div class="section level2">
<h2 id="use-attachment-with-bookdown-pagedown-quarto-dependencies">Use {attachment} with {bookdown} / {pagedown} / {quarto}
dependencies<a class="anchor" aria-label="anchor" href="#use-attachment-with-bookdown-pagedown-quarto-dependencies"></a>
</h2>
<p>Dependencies of your Bookdown can be automatically installed if you
use a “DESCRIPTION” file.<br>
Indeed, you can use this procedure to create the DESCRIPTION file for
local installation or for Continuous Integration with GitLab Pages or
GitHub Actions. See for instance, the GitLab CI workflows in {gitlabr}:
<a href="https://github.com/ThinkR-open/gitlabr/tree/main/inst/gitlab-ci" class="external-link uri">https://github.com/ThinkR-open/gitlabr/tree/main/inst/gitlab-ci</a></p>
<ol style="list-style-type: decimal">
<li>Create a “DESCRIPTION” file</li>
</ol>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">usethis</span><span class="fu">::</span><span class="fu">use_description</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Fill the “DESCRIPTION” file using
<code><a href="../reference/att_to_desc_from_is.html">attachment::att_to_desc_from_is()</a></code>. <em>Note that to include
it directly in CI (as proposed in {gitlabr} templates), you may need to
set <code>att_to_desc_from_is(must.exist = FALSE)</code>.</em><br><em>Note that <code><a href="../reference/att_from_rmds.html">att_from_rmds()</a></code> also works for “.qmd”
documents. You can use <code><a href="../reference/att_from_rmds.html">att_from_qmds()</a></code> if you want,
although for now there is no difference and it will also parse “.Rmd”
documents.</em>
</li>
</ol>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># bookdown Imports are in Rmds</span></span>
<span><span class="va">imports</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bookdown"</span>, <span class="fu">attachment</span><span class="fu">::</span><span class="fu"><a href="../reference/att_from_rmds.html">att_from_rmds</a></span><span class="op">(</span><span class="st">"."</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">attachment</span><span class="fu">::</span><span class="fu"><a href="../reference/att_to_desc_from_is.html">att_to_desc_from_is</a></span><span class="op">(</span></span>
<span>  path.d <span class="op">=</span> <span class="st">"DESCRIPTION"</span>,</span>
<span>  imports <span class="op">=</span> <span class="va">imports</span>, suggests <span class="op">=</span> <span class="cn">NULL</span>, </span>
<span>  must.exist <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Install dependencies from the DESCRIPTION file</li>
</ol>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("remotes")</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_deps</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>Build your {bookdown} / {pagedown} / {quarto}</li>
</ol>
<div class="section level3">
<h3 id="propose-content-for-remotes-field">Propose content for “Remotes” field<a class="anchor" aria-label="anchor" href="#propose-content-for-remotes-field"></a>
</h3>
<p>An interest of using DESCRIPTION to list your bookdown dependencies
is to use packages from other sources than CRAN and list them in the
‘Remotes’ field.<br>
Here comes <code><a href="../reference/set_remotes_to_desc.html">set_remotes_to_desc()</a></code>, which adds packages that
were installed from other source than CRAN to <code>Remotes:</code>
field in DESCRIPTION.</p>
<p>You can run it after <code><a href="../reference/att_to_desc_from_is.html">att_to_desc_from_is()</a></code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">attachment</span><span class="fu">::</span><span class="fu"><a href="../reference/att_to_desc_from_is.html">att_to_desc_from_is</a></span><span class="op">(</span></span>
<span>  path.d <span class="op">=</span> <span class="st">"DESCRIPTION"</span>,</span>
<span>  imports <span class="op">=</span> <span class="va">imports</span>, suggests <span class="op">=</span> <span class="cn">NULL</span>, </span>
<span>  must.exist <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/set_remotes_to_desc.html">set_remotes_to_desc</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="get-all-packages-listed-in-namespace">Get all packages listed in “namespace”<a class="anchor" aria-label="anchor" href="#get-all-packages-listed-in-namespace"></a>
</h2>
<p>You can get the list of packages in your package with
<code><a href="../reference/att_from_namespace.html">att_from_namespace()</a></code></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/att_from_namespace.html">att_from_namespace</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="get-all-packages-added-using-pkgfunction-or-libraryrequire">Get all packages added using <code>pkg::function</code> or
library/require<a class="anchor" aria-label="anchor" href="#get-all-packages-added-using-pkgfunction-or-libraryrequire"></a>
</h2>
<p>This reads all files in directories of R scripts (default to
<code>R</code> directory of a package)</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/att_from_rscripts.html">att_from_rscripts</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="get-all-packages-called-in-your-rmd">Get all packages called in your Rmd<a class="anchor" aria-label="anchor" href="#get-all-packages-called-in-your-rmd"></a>
</h2>
<p>If you have vignette, you may want to list extra libraries, not
listed in your “Depends” list. This function applies to any Rmd file, of
course.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/att_from_rmds.html">att_from_rmds</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="get-all-packages-called-in-your-rmd-and-show-them-in-this-same-rmd">Get all packages called in your Rmd and show them in this same
Rmd<a class="anchor" aria-label="anchor" href="#get-all-packages-called-in-your-rmd-and-show-them-in-this-same-rmd"></a>
</h2>
<p>Of course, you can also use {attachment} out of a package to list all
package dependencies of R scripts using <code><a href="../reference/att_from_rscripts.html">att_from_rscripts()</a></code>
or Rmd files using <code><a href="../reference/att_from_rmds.html">att_from_rmds()</a></code>.<br>
If you want to run <code><a href="../reference/att_from_rmds.html">att_from_rmds()</a></code> inside a Rmd as for this
vignette, you will need to set
<code>att_from_rmds(inside_rmd = TRUE)</code></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dummypackage</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"dummypackage"</span>, package <span class="op">=</span> <span class="st">"attachment"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/att_from_rmds.html">att_from_rmds</a></span><span class="op">(</span>path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">dummypackage</span>, <span class="st">"vignettes"</span><span class="op">)</span>, inside_rmd <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "knitr"     "rmarkdown" "glue"</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Sébastien Rochette, Vincent Guyader, Murielle Delmotte, Swann Floc’hlay, ThinkR.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
