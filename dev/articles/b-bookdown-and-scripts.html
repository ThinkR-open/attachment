<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bookdown, quarto and other scripts dependencies • attachment</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Bootstrap --><link href="../cosmo.css" rel="stylesheet">
<link href="../thinkr.css" rel="stylesheet">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Bookdown, quarto and other scripts dependencies">
<meta property="og:description" content="attachment">
<meta property="og:image" content="https://thinkr-open.github.io/attachment/logo.png">
<meta name="twitter:card" content="summary">
<meta name="robots" content="noindex">
<!-- mathjax
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
--><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!--  Code folding --><script src="../codefolding.js"></script><link href="../codefolding.css" rel="stylesheet">
<!--
<script>
         document.write('<div class="navbar"><div class="container"><div id="code-folding-buttons" class="btn-group"><button class="btn btn-default btn-xs dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-_extension-text-contrast=""><span>Show/Hide all code</span><span class="caret"></span></button><ul class="dropdown-menu" style="min-width: 50px;"><li><a id="rmd-show-all-code" href="#">Show All Code</a></li><li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li></ul></div></div></div>')
</script>
--><!-- google analytics
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());

 gtag('config', 'UA-115082821-1');
</script>
-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">attachment</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.3.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/a-fill-pkg-description.html">a-Help during package development</a>
    </li>
    <li>
      <a href="../articles/b-bookdown-and-scripts.html">Bookdown, quarto and other scripts dependencies</a>
    </li>
    <li>
      <a href="../articles/create-dependencies-file.html">Create dependencies file</a>
    </li>
    <li>
      <a href="../articles/use_renv.html">Use {renv} with developers tools</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
          <div id="code-folding-buttons" class="btn-group">
<button class="btn btn-default btn-xs dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-_extension-text-contrast=""><span>Show/Hide all code</span><span class="caret"></span></button><ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>
        </li>
        <li>
  <a href="https://github.com/ThinkR-open/attachment/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Bookdown, quarto and other scripts
dependencies</h1>
                        <h4 data-toc-skip class="author">Sébastien
Rochette</h4>
            
            <h4 data-toc-skip class="date">2023-03-28</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ThinkR-open/attachment/blob/HEAD/vignettes/b-bookdown-and-scripts.Rmd" class="external-link"><code>vignettes/b-bookdown-and-scripts.Rmd</code></a></small>
      <div class="hidden name"><code>b-bookdown-and-scripts.Rmd</code></div>

    </div>

    
    
<script type="text/javascript">
$(document).ready(function () {
  window.initializeCodeFolding("show" === "show");
});
</script><div class="section level2">
<h2 id="load-package-attachment">Load package {attachment}<a class="anchor" aria-label="anchor" href="#load-package-attachment"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://thinkr-open.github.io/attachment/">attachment</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="use-devdev_history-r">Use “dev/dev_history.R”<a class="anchor" aria-label="anchor" href="#use-devdev_history-r"></a>
</h2>
<p>When building your package, create a file called “dev_history.R” in a
“dev/” directory. You will store all “manual” calls to
<code>devtools::xxx</code> and <code>usethis::xxx</code> in this
script.<br>
Its first line should be :</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">usethis</span><span class="fu">::</span><span class="fu">use_build_ignore</span><span class="op">(</span><span class="st">"dev"</span><span class="op">)</span></span></code></pre></div>
<p>You can then call {attachment} in this file to help you build your
description file.</p>
</div>
<div class="section level2">
<h2 id="use-attachment-with-bookdown-pagedown-quarto-dependencies">Use {attachment} with {bookdown} / {pagedown} / {quarto}
dependencies<a class="anchor" aria-label="anchor" href="#use-attachment-with-bookdown-pagedown-quarto-dependencies"></a>
</h2>
<p>Dependencies of your Bookdown can be automatically installed if you
use a “DESCRIPTION” file.<br>
Indeed, you can use this procedure to create the DESCRIPTION file for
local installation or for Continuous Integration with GitLab Pages or
GitHub Actions. See for instance, the GitLab CI workflows in {gitlabr}:
<a href="https://github.com/ThinkR-open/gitlabr/tree/main/inst/gitlab-ci" class="external-link uri">https://github.com/ThinkR-open/gitlabr/tree/main/inst/gitlab-ci</a></p>
<ol style="list-style-type: decimal">
<li>Create a “DESCRIPTION” file</li>
</ol>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">usethis</span><span class="fu">::</span><span class="fu">use_description</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Fill the “DESCRIPTION” file using
<code><a href="../reference/att_to_desc_from_is.html">attachment::att_to_desc_from_is()</a></code>. <em>Note that to include
it directly in CI (as proposed in {gitlabr} templates), you may need to
set <code>att_to_desc_from_is(must.exist = FALSE)</code>.</em><br><em>Note that <code><a href="../reference/att_from_rmds.html">att_from_rmds()</a></code> also works for “.qmd”
documents. You can use <code><a href="../reference/att_from_rmds.html">att_from_qmds()</a></code> if you want,
although for now there is no difference and it will also parse “.Rmd”
documents.</em>
</li>
</ol>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># bookdown Imports are in Rmds</span></span>
<span><span class="va">imports</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bookdown"</span>, <span class="fu">attachment</span><span class="fu">::</span><span class="fu"><a href="../reference/att_from_rmds.html">att_from_rmds</a></span><span class="op">(</span><span class="st">"."</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">attachment</span><span class="fu">::</span><span class="fu"><a href="../reference/att_to_desc_from_is.html">att_to_desc_from_is</a></span><span class="op">(</span></span>
<span>  path.d <span class="op">=</span> <span class="st">"DESCRIPTION"</span>,</span>
<span>  imports <span class="op">=</span> <span class="va">imports</span>, suggests <span class="op">=</span> <span class="cn">NULL</span>, </span>
<span>  must.exist <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Install dependencies from the DESCRIPTION file</li>
</ol>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("remotes")</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_deps</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>Build your {bookdown} / {pagedown} / {quarto}</li>
</ol>
<div class="section level3">
<h3 id="propose-content-for-remotes-field">Propose content for “Remotes” field<a class="anchor" aria-label="anchor" href="#propose-content-for-remotes-field"></a>
</h3>
<p>An interest of using DESCRIPTION to list your bookdown dependencies
is to use packages from other sources than CRAN and list them in the
‘Remotes’ field.<br>
Here comes <code><a href="../reference/set_remotes_to_desc.html">set_remotes_to_desc()</a></code>, which adds packages that
were installed from other source than CRAN to <code>Remotes:</code>
field in DESCRIPTION.</p>
<p>You can run it after <code><a href="../reference/att_to_desc_from_is.html">att_to_desc_from_is()</a></code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">attachment</span><span class="fu">::</span><span class="fu"><a href="../reference/att_to_desc_from_is.html">att_to_desc_from_is</a></span><span class="op">(</span></span>
<span>  path.d <span class="op">=</span> <span class="st">"DESCRIPTION"</span>,</span>
<span>  imports <span class="op">=</span> <span class="va">imports</span>, suggests <span class="op">=</span> <span class="cn">NULL</span>, </span>
<span>  must.exist <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/set_remotes_to_desc.html">set_remotes_to_desc</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="get-all-packages-listed-in-namespace">Get all packages listed in “namespace”<a class="anchor" aria-label="anchor" href="#get-all-packages-listed-in-namespace"></a>
</h2>
<p>You can get the list of packages in your package with
<code><a href="../reference/att_from_namespace.html">att_from_namespace()</a></code></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/att_from_namespace.html">att_from_namespace</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="get-all-packages-added-using-pkgfunction-or-libraryrequire">Get all packages added using <code>pkg::function</code> or
library/require<a class="anchor" aria-label="anchor" href="#get-all-packages-added-using-pkgfunction-or-libraryrequire"></a>
</h2>
<p>This reads all files in directories of R scripts (default to
<code>R</code> directory of a package)</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/att_from_rscripts.html">att_from_rscripts</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="get-all-packages-called-in-your-rmd">Get all packages called in your Rmd<a class="anchor" aria-label="anchor" href="#get-all-packages-called-in-your-rmd"></a>
</h2>
<p>If you have vignette, you may want to list extra libraries, not
listed in your “Depends” list. This function applies to any Rmd file, of
course.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/att_from_rmds.html">att_from_rmds</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="get-all-packages-called-in-your-rmd-and-show-them-in-this-same-rmd">Get all packages called in your Rmd and show them in this same
Rmd<a class="anchor" aria-label="anchor" href="#get-all-packages-called-in-your-rmd-and-show-them-in-this-same-rmd"></a>
</h2>
<p>Of course, you can also use {attachment} out of a package to list all
package dependencies of R scripts using <code><a href="../reference/att_from_rscripts.html">att_from_rscripts()</a></code>
or Rmd files using <code><a href="../reference/att_from_rmds.html">att_from_rmds()</a></code>.<br>
If you want to run <code><a href="../reference/att_from_rmds.html">att_from_rmds()</a></code> inside a Rmd as for this
vignette, you will need to set
<code>att_from_rmds(inside_rmd = TRUE)</code></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dummypackage</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"dummypackage"</span>, package <span class="op">=</span> <span class="st">"attachment"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/att_from_rmds.html">att_from_rmds</a></span><span class="op">(</span>path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">dummypackage</span>, <span class="st">"vignettes"</span><span class="op">)</span>, inside_rmd <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "knitr"     "rmarkdown" "glue"</span></span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="thinkr">
  <p></p>
<p>Developed by Sébastien Rochette, Vincent Guyader, ThinkR.</p>,<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

<div class="author">
  <p>
    Developed by .
    Site built by <a href="https://pkgdown.r-lib.org" class="external-link">pkgdown</a>.
  </p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
